{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { useContext, useState } from 'react';\nimport AuthContent from \"../components/Auth/AuthContent\";\nimport { createUser } from \"../utils/auth\";\nimport LoadingOverlay from \"../components/ui/LoadingOverlay\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport { capitalize } from \"../utils/text\";\nimport { AuthContext } from \"../context/auth-context\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nfunction SignupScreen() {\n  var _useState = useState(true),\n    _useState2 = _slicedToArray(_useState, 2),\n    isAuthenticated = _useState2[0],\n    setAuthenticated = _useState2[1];\n  var _useContext = useContext(AuthContext),\n    authenticate = _useContext.authenticate;\n  var signupHandler = function () {\n    var _ref = _asyncToGenerator(function* (user) {\n      setAuthenticated(false);\n      try {\n        var res = yield createUser(user);\n        if (res.data.idToken) {\n        } else {\n          Alert.alert('Error', 'Something went wrong. Please try again.');\n        }\n        setAuthenticated(true);\n      } catch (error) {\n        Alert.alert(capitalize(error.message), \"Could not create user. Please try again later.\");\n        setAuthenticated(true);\n      }\n    });\n    return function signupHandler(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  if (!isAuthenticated) return _jsx(LoadingOverlay, {\n    message: \"Creating user...\"\n  });\n  return _jsx(AuthContent, {\n    onAuthenticate: signupHandler\n  });\n}\nexport default SignupScreen;","map":{"version":3,"names":["useContext","useState","AuthContent","createUser","LoadingOverlay","capitalize","AuthContext","SignupScreen","isAuthenticated","setAuthenticated","authenticate","signupHandler","user","res","data","idToken","Alert","alert","error","message"],"sources":["T:/Online Courses/React Native - The Practical Guide. Maximilian SchwarzmÃ¼ller/authentication/screens/SignupScreen.js"],"sourcesContent":["import { useContext, useState } from 'react';\nimport AuthContent from '../components/Auth/AuthContent';\nimport { createUser } from '../utils/auth';\nimport LoadingOverlay from '../components/ui/LoadingOverlay';\nimport { Alert } from 'react-native';\nimport { capitalize } from '../utils/text';\nimport { AuthContext } from '../context/auth-context';\n\nfunction SignupScreen() {\n  const [isAuthenticated, setAuthenticated] = useState(true);\n  const { authenticate } = useContext(AuthContext);\n\n  const signupHandler = async (user) => {\n    setAuthenticated(false);\n    try {\n      const res = await createUser(user);\n      if(res.data.idToken) {\n        // authenticate(res.data.idToken);\n      } else {\n        Alert.alert('Error', 'Something went wrong. Please try again.');\n      }\n      setAuthenticated(true);\n    } catch (error) {\n      Alert.alert(\n        capitalize(error.message),\n        \"Could not create user. Please try again later.\",\n      )\n      setAuthenticated(true);\n    }\n  };\n\n  if (!isAuthenticated) return <LoadingOverlay message=\"Creating user...\" />;\n\n  return <AuthContent onAuthenticate={signupHandler} />;\n}\n\nexport default SignupScreen;\n"],"mappings":";;AAAA,SAASA,UAAU,EAAEC,QAAQ,QAAQ,OAAO;AAC5C,OAAOC,WAAW;AAClB,SAASC,UAAU;AACnB,OAAOC,cAAc;AAAwC;AAE7D,SAASC,UAAU;AACnB,SAASC,WAAW;AAAkC;AAEtD,SAASC,YAAY,GAAG;EACtB,gBAA4CN,QAAQ,CAAC,IAAI,CAAC;IAAA;IAAnDO,eAAe;IAAEC,gBAAgB;EACxC,kBAAyBT,UAAU,CAACM,WAAW,CAAC;IAAxCI,YAAY,eAAZA,YAAY;EAEpB,IAAMC,aAAa;IAAA,6BAAG,WAAOC,IAAI,EAAK;MACpCH,gBAAgB,CAAC,KAAK,CAAC;MACvB,IAAI;QACF,IAAMI,GAAG,SAASV,UAAU,CAACS,IAAI,CAAC;QAClC,IAAGC,GAAG,CAACC,IAAI,CAACC,OAAO,EAAE;QAErB,CAAC,MAAM;UACLC,KAAK,CAACC,KAAK,CAAC,OAAO,EAAE,yCAAyC,CAAC;QACjE;QACAR,gBAAgB,CAAC,IAAI,CAAC;MACxB,CAAC,CAAC,OAAOS,KAAK,EAAE;QACdF,KAAK,CAACC,KAAK,CACTZ,UAAU,CAACa,KAAK,CAACC,OAAO,CAAC,EACzB,gDAAgD,CACjD;QACDV,gBAAgB,CAAC,IAAI,CAAC;MACxB;IACF,CAAC;IAAA,gBAjBKE,aAAa;MAAA;IAAA;EAAA,GAiBlB;EAED,IAAI,CAACH,eAAe,EAAE,OAAO,KAAC,cAAc;IAAC,OAAO,EAAC;EAAkB,EAAG;EAE1E,OAAO,KAAC,WAAW;IAAC,cAAc,EAAEG;EAAc,EAAG;AACvD;AAEA,eAAeJ,YAAY"},"metadata":{},"sourceType":"module"}