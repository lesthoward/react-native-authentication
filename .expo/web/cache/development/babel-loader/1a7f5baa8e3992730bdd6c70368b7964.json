{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { useContext, useState } from 'react';\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport AuthContent from \"../components/Auth/AuthContent\";\nimport LoadingOverlay from \"../components/ui/LoadingOverlay\";\nimport { AuthContext } from \"../context/auth-context\";\nimport { loginUser } from \"../utils/auth\";\nimport { capitalize } from \"../utils/text\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nfunction LoginScreen() {\n  var _useState = useState(true),\n    _useState2 = _slicedToArray(_useState, 2),\n    isAuthenticated = _useState2[0],\n    setAuthenticated = _useState2[1];\n\n  var loginHandler = function () {\n    var _ref = _asyncToGenerator(function* (user) {\n      console.log('ðŸš€ ~ file: LoginScreen.js ~ line 14 ~ loginHandler ~ user', user);\n      setAuthenticated(false);\n      try {\n        var res = yield loginUser(user);\n        console.log('ðŸš€ ~ file: LoginScreen.js ~ line 18 ~ loginHandler ~ res', res.data);\n        if (res.data.idToken) {\n          authenticate(res.data.idToken);\n        } else {\n          Alert.alert('Error', 'Something went wrong. Please try again.');\n        }\n        setAuthenticated(true);\n      } catch (error) {\n        setAuthenticated(true);\n        Alert.alert(\"Invalid credentials\", 'Could not login. Please try again later.');\n      }\n    });\n    return function loginHandler(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  if (!isAuthenticated) return _jsx(LoadingOverlay, {\n    message: \"Logging you in...\"\n  });\n  return _jsx(AuthContent, {\n    isLogin: true,\n    onAuthenticate: loginHandler\n  });\n}\nexport default LoginScreen;","map":{"version":3,"names":["useContext","useState","AuthContent","LoadingOverlay","AuthContext","loginUser","capitalize","LoginScreen","isAuthenticated","setAuthenticated","loginHandler","user","console","log","res","data","idToken","authenticate","Alert","alert","error"],"sources":["T:/Online Courses/React Native - The Practical Guide. Maximilian SchwarzmÃ¼ller/authentication/screens/LoginScreen.js"],"sourcesContent":["import { useContext, useState } from 'react';\nimport { Alert } from 'react-native';\nimport AuthContent from '../components/Auth/AuthContent';\nimport LoadingOverlay from '../components/ui/LoadingOverlay';\nimport { AuthContext } from '../context/auth-context';\nimport { loginUser } from '../utils/auth';\nimport { capitalize } from '../utils/text';\n\nfunction LoginScreen() {\n  const [isAuthenticated, setAuthenticated] = useState(true);\n  // const { authenticate } = useContext(AuthContext);\n\n  const loginHandler = async (user) => {\n    console.log('ðŸš€ ~ file: LoginScreen.js ~ line 14 ~ loginHandler ~ user', user)\n    setAuthenticated(false);\n    try {\n      const res = await loginUser(user);\n      console.log('ðŸš€ ~ file: LoginScreen.js ~ line 18 ~ loginHandler ~ res', res.data)\n      if (res.data.idToken) {\n        authenticate(res.data.idToken);\n      } else {\n        Alert.alert('Error', 'Something went wrong. Please try again.');\n      }\n      setAuthenticated(true);\n    } catch (error) {\n      setAuthenticated(true);\n      Alert.alert(\n        \"Invalid credentials\",\n        'Could not login. Please try again later.'\n      );\n    }\n  };\n\n  if (!isAuthenticated) return <LoadingOverlay message=\"Logging you in...\" />;\n  return <AuthContent isLogin onAuthenticate={loginHandler} />;\n}\n\nexport default LoginScreen;\n"],"mappings":";;AAAA,SAASA,UAAU,EAAEC,QAAQ,QAAQ,OAAO;AAAC;AAE7C,OAAOC,WAAW;AAClB,OAAOC,cAAc;AACrB,SAASC,WAAW;AACpB,SAASC,SAAS;AAClB,SAASC,UAAU;AAAwB;AAE3C,SAASC,WAAW,GAAG;EACrB,gBAA4CN,QAAQ,CAAC,IAAI,CAAC;IAAA;IAAnDO,eAAe;IAAEC,gBAAgB;;EAGxC,IAAMC,YAAY;IAAA,6BAAG,WAAOC,IAAI,EAAK;MACnCC,OAAO,CAACC,GAAG,CAAC,2DAA2D,EAAEF,IAAI,CAAC;MAC9EF,gBAAgB,CAAC,KAAK,CAAC;MACvB,IAAI;QACF,IAAMK,GAAG,SAAST,SAAS,CAACM,IAAI,CAAC;QACjCC,OAAO,CAACC,GAAG,CAAC,0DAA0D,EAAEC,GAAG,CAACC,IAAI,CAAC;QACjF,IAAID,GAAG,CAACC,IAAI,CAACC,OAAO,EAAE;UACpBC,YAAY,CAACH,GAAG,CAACC,IAAI,CAACC,OAAO,CAAC;QAChC,CAAC,MAAM;UACLE,KAAK,CAACC,KAAK,CAAC,OAAO,EAAE,yCAAyC,CAAC;QACjE;QACAV,gBAAgB,CAAC,IAAI,CAAC;MACxB,CAAC,CAAC,OAAOW,KAAK,EAAE;QACdX,gBAAgB,CAAC,IAAI,CAAC;QACtBS,KAAK,CAACC,KAAK,CACT,qBAAqB,EACrB,0CAA0C,CAC3C;MACH;IACF,CAAC;IAAA,gBAnBKT,YAAY;MAAA;IAAA;EAAA,GAmBjB;EAED,IAAI,CAACF,eAAe,EAAE,OAAO,KAAC,cAAc;IAAC,OAAO,EAAC;EAAmB,EAAG;EAC3E,OAAO,KAAC,WAAW;IAAC,OAAO;IAAC,cAAc,EAAEE;EAAa,EAAG;AAC9D;AAEA,eAAeH,WAAW"},"metadata":{},"sourceType":"module"}